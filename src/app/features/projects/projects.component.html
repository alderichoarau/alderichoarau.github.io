<section id="projects" class="section fade-in-up">
  <div class="container">
    <div class="projects-content">
      <!-- Header -->
      <div class="projects-header">
        <div class="section-badge">
          <mat-icon class="badge-icon">work</mat-icon>
          <span class="badge-text">{{ 'projects.title' | translate }}</span>
        </div>
        <p class="section-subtitle">{{ 'projects.subtitle' | translate }}</p>
      </div>

      <!-- Featured Projects Grid -->
      <div class="projects-grid">
        @for (project of featuredProjects(); track trackByProject(i, project); let i = $index) {
          <div
            class="project-card"
            [class.fade-in-left]="i % 2 === 0"
            [class.fade-in-right]="i % 2 === 1"
          >
            <mat-card class="modern-project-card">
              <!-- Project Image -->
              <div class="project-image-container">
                <img
                  [src]="project.image"
                  [alt]="project.title"
                  class="project-image"
                  (error)="onImageError($event)"
                />
                <div class="project-overlay">
                  <div class="project-actions">
                    @if (project.liveUrl && project.liveUrl !== '#') {
                      <button
                        mat-fab
                        color="primary"
                        class="action-button"
                        (click)="openLink(project.liveUrl)"
                        [title]="'projects.liveDemo' | translate"
                      >
                        <mat-icon>launch</mat-icon>
                      </button>
                    }
                    @if (project.sourceUrl && project.sourceUrl !== '#') {
                      <button
                        mat-fab
                        color="accent"
                        class="action-button"
                        (click)="openLink(project.sourceUrl)"
                        [title]="'projects.sourceCode' | translate"
                      >
                        <mat-icon>code</mat-icon>
                      </button>
                    }
                  </div>
                </div>
              </div>
              <!-- Project Content -->
              <mat-card-content class="project-content">
                <div class="project-header">
                  <h3 class="project-title">{{ project.title | translate }}</h3>
                  @if (project.featured) {
                    <div class="project-featured">
                      <mat-icon class="featured-icon">star</mat-icon>
                      <span class="featured-text">{{ 'projects.featured' | translate }}</span>
                    </div>
                  }
                </div>
                <p class="project-description">{{ project.description | translate }}</p>
                <div class="project-technologies">
                  @for (tech of project.technologies; track tech) {
                    <div
                      class="tech-tag"
                      [style.--tech-color]="
                        dataService.getTechnologyByName(tech)?.color || 'var(--accent-color)'
                      "
                    >
                      <mat-icon class="tech-icon">{{
                        dataService.getTechnologyByName(tech)?.icon || 'code'
                      }}</mat-icon>
                      <span class="tech-name">{{ tech }}</span>
                    </div>
                  }
                </div>
                <div class="project-actions-footer">
                  @if (project.liveUrl && project.liveUrl !== '#') {
                    <button
                      mat-raised-button
                      color="primary"
                      class="project-button"
                      (click)="openLink(project.liveUrl)"
                    >
                      <mat-icon>launch</mat-icon>
                      <span>{{ 'projects.liveDemo' | translate }}</span>
                    </button>
                  }
                  @if (project.sourceUrl && project.sourceUrl !== '#') {
                    <button
                      mat-outlined-button
                      class="project-button"
                      (click)="openLink(project.sourceUrl)"
                    >
                      <mat-icon>code</mat-icon>
                      <span>{{ 'projects.sourceCode' | translate }}</span>
                    </button>
                  }
                </div>
              </mat-card-content>
            </mat-card>
          </div>
        }
      </div>

      <!-- All Projects Section -->
      <div class="all-projects-section">
        <div class="section-divider">
          <div class="divider-line"></div>
          <div class="divider-text">
            <mat-icon>apps</mat-icon>
            <span>{{ 'projects.allProjects' | translate }}</span>
          </div>
          <div class="divider-line"></div>
        </div>

        <div class="all-projects-grid">
          @for (project of projects(); track trackByProject($index, project)) {
            <div class="mini-project-card">
              <mat-card class="mini-card">
                <div class="mini-project-image">
                  <img [src]="project.image" [alt]="project.title" (error)="onImageError($event)" />
                  <div class="mini-project-overlay">
                    <mat-icon class="project-type-icon">{{
                      project.featured ? 'star' : 'code'
                    }}</mat-icon>
                  </div>
                </div>
                <mat-card-content class="mini-project-content">
                  <h4 class="mini-project-title">{{ project.title | translate }}</h4>
                  <p class="mini-project-description">
                    {{
                      (project.description | translate).length > 80
                        ? (project.description | translate | slice: 0 : 80) + '...'
                        : (project.description | translate)
                    }}
                  </p>
                  <div class="mini-project-tech">
                    @for (tech of project.technologies.slice(0, 3); track tech) {
                      <div class="mini-tech-tag">
                        {{ tech }}
                      </div>
                    }
                    @if (project.technologies.length > 3) {
                      <span class="tech-more"> +{{ project.technologies.length - 3 }} </span>
                    }
                  </div>
                  <div class="mini-project-actions">
                    @if (project.liveUrl && project.liveUrl !== '#') {
                      <button
                        mat-icon-button
                        class="mini-action-button"
                        (click)="openLink(project.liveUrl)"
                        [title]="'projects.liveDemo' | translate"
                      >
                        <mat-icon>launch</mat-icon>
                      </button>
                    }
                    @if (project.sourceUrl && project.sourceUrl !== '#') {
                      <button
                        mat-icon-button
                        class="mini-action-button"
                        (click)="openLink(project.sourceUrl)"
                        [title]="'projects.sourceCode' | translate"
                      >
                        <mat-icon>code</mat-icon>
                      </button>
                    }
                  </div>
                </mat-card-content>
              </mat-card>
            </div>
          }
        </div>
      </div>
    </div>
  </div>
</section>
